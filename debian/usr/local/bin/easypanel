#!/bin/bash

################################################################################
# EasyPanel - Main Entry Point Wrapper
# Sources all necessary libraries and launches the main application
################################################################################

# Set up library path (absolute paths)
export EASYPANEL_LIB_DIR="/usr/local/lib/easypanel"
export EASYPANEL_MODULES_DIR="/usr/local/lib/easypanel/modules"

# Check if library exists
if [ ! -f "$EASYPANEL_LIB_DIR/utils.sh" ]; then
    echo "Error: Cannot find utils.sh library at $EASYPANEL_LIB_DIR/utils.sh"
    echo "EasyPanel may not be installed correctly."
    exit 1
fi

# Source the utility library
source "$EASYPANEL_LIB_DIR/utils.sh"

# Check if main script exists
MAIN_SCRIPT="/usr/local/bin/easypanel-bin"
if [ ! -f "$MAIN_SCRIPT" ]; then
    echo "Error: Cannot find main script at $MAIN_SCRIPT"
    echo "EasyPanel may not be installed correctly."
    exit 1
fi

# Run the main application
exec bash "$MAIN_SCRIPT" "$@"
