#!/bin/bash

################################################################################
# EasyPanel - Main Entry Point Wrapper
# Sources all necessary libraries and launches the main application
################################################################################

# Set up library paths (absolute paths)
EASYPANEL_LIB_DIR="/usr/local/lib/easypanel"
EASYPANEL_MODULES_DIR="/usr/local/lib/easypanel/modules"
MAIN_SCRIPT="/usr/local/bin/easypanel-bin"

# Export for subshells
export EASYPANEL_LIB_DIR
export EASYPANEL_MODULES_DIR

# Check if library exists
if [ ! -f "$EASYPANEL_LIB_DIR/utils.sh" ]; then
    echo "Error: Cannot find utils.sh library at $EASYPANEL_LIB_DIR/utils.sh"
    exit 1
fi

# Check if main script exists
if [ ! -f "$MAIN_SCRIPT" ]; then
    echo "Error: Cannot find main script at $MAIN_SCRIPT"
    exit 1
fi

# Source the utility library in this shell
. "$EASYPANEL_LIB_DIR/utils.sh"

# Source the main script in this shell (don't exec, just source)
. "$MAIN_SCRIPT" "$@"
